{"prompt": "Debug this Python code: x = [1, 2, 3]\nfor i in range(4):\n    print(x[i])", "completion": "The issue is an IndexError. The list has 3 elements (indices 0-2), but the loop tries to access index 3. Fix: Change range(4) to range(3) or range(len(x))."}
{"prompt": "What's wrong with this SQL query? SELECT * FROM users WHERE age > 18 AND name = NULL", "completion": "The comparison 'name = NULL' is incorrect. In SQL, NULL comparisons require IS NULL or IS NOT NULL operators. Fix: Use 'name IS NULL' instead of 'name = NULL'."}
{"prompt": "Explain why this code returns undefined: function add(a, b) { a + b }", "completion": "The function has no return statement. It performs the addition but doesn't return the result. Fix: Add 'return' before 'a + b': function add(a, b) { return a + b; }"}
{"prompt": "Given a table with columns [id, name, score], write a query to find the top 3 highest scores", "completion": "SELECT id, name, score FROM table_name ORDER BY score DESC LIMIT 3;"}
{"prompt": "How do I fix this error: 'NoneType' object has no attribute 'split'", "completion": "This means you're calling .split() on None. Check that the variable is not None before calling methods. Example: if text is not None: text.split()"}
{"prompt": "Write a function to check if a string is a palindrome", "completion": "def is_palindrome(s):\n    s = s.lower().replace(' ', '')\n    return s == s[::-1]\n\nThis removes spaces, converts to lowercase, and compares the string with its reverse."}
{"prompt": "Optimize this loop: result = []\nfor i in range(len(data)):\n    result.append(data[i] * 2)", "completion": "Use list comprehension: result = [x * 2 for x in data]\nThis is more Pythonic, faster, and easier to read."}
{"prompt": "What's the difference between == and === in JavaScript?", "completion": "== performs type coercion (converts types before comparing), while === checks both value and type without conversion. Example: '5' == 5 is true, but '5' === 5 is false."}
{"prompt": "Debug: def calculate_average(numbers):\n    return sum(numbers) / len(numbers)\n\nFails on empty list", "completion": "The function doesn't handle empty lists, causing ZeroDivisionError. Fix:\ndef calculate_average(numbers):\n    if not numbers:\n        return 0\n    return sum(numbers) / len(numbers)"}
{"prompt": "Given a table with [product_id, category, price, quantity], find total revenue by category", "completion": "SELECT category, SUM(price * quantity) as total_revenue FROM table_name GROUP BY category ORDER BY total_revenue DESC;"}
{"prompt": "Why doesn't my CSS work? .button { color: blue important; }", "completion": "The syntax is incorrect. Use '!important' (with exclamation mark): .button { color: blue !important; }"}
{"prompt": "Convert this to a more efficient data structure: checking if element exists in list of 10000 items", "completion": "Use a set instead of a list. Sets have O(1) lookup time vs O(n) for lists. Example: items_set = set(items_list), then: if element in items_set:"}
{"prompt": "Fix this regex that should match email addresses: ^[a-z]+@[a-z]+.[a-z]+$", "completion": "The dot before the domain extension needs escaping. Fix: ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$ (also added more valid characters)"}
{"prompt": "Why does this produce unexpected output? print(0.1 + 0.2 == 0.3)", "completion": "This is False due to floating-point precision errors. Fix: Use math.isclose() or round to a specific precision: round(0.1 + 0.2, 10) == 0.3"}
{"prompt": "Write code to find duplicates in a list", "completion": "from collections import Counter\n\ndef find_duplicates(lst):\n    counts = Counter(lst)\n    return [item for item, count in counts.items() if count > 1]"}
{"prompt": "Debug: async function fetchData() { const data = fetch('/api'); console.log(data); }", "completion": "Missing 'await' keyword. fetch() returns a Promise. Fix: const data = await fetch('/api'); or use .then(): fetch('/api').then(data => console.log(data))"}
{"prompt": "Given tables [orders(id, user_id, total), users(id, name)], write query to find users who never ordered", "completion": "SELECT u.id, u.name FROM users u LEFT JOIN orders o ON u.id = o.user_id WHERE o.id IS NULL;"}
{"prompt": "Why does my loop run forever? i = 0\nwhile i < 10:\n    print(i)", "completion": "The loop variable 'i' is never incremented. Fix: Add 'i += 1' inside the loop body."}
{"prompt": "Convert this callback to async/await: getData(function(result) { processData(result, function(processed) { console.log(processed); }); });", "completion": "const result = await getData();\nconst processed = await processData(result);\nconsole.log(processed);"}
{"prompt": "Optimize this query that's slow: SELECT * FROM large_table WHERE YEAR(date_column) = 2023", "completion": "Using functions on columns prevents index usage. Fix: SELECT * FROM large_table WHERE date_column >= '2023-01-01' AND date_column < '2024-01-01'; Also consider adding an index on date_column."}
{"prompt": "Write a function to merge two sorted arrays efficiently", "completion": "def merge_sorted(arr1, arr2):\n    result = []\n    i = j = 0\n    while i < len(arr1) and j < len(arr2):\n        if arr1[i] <= arr2[j]:\n            result.append(arr1[i])\n            i += 1\n        else:\n            result.append(arr2[j])\n            j += 1\n    result.extend(arr1[i:])\n    result.extend(arr2[j:])\n    return result"}
{"prompt": "Debug: import json\ndata = \"{'key': 'value'}\"\nobj = json.loads(data)", "completion": "JSON requires double quotes, not single quotes. Fix: data = '{\"key\": \"value\"}' or use json.dumps() for serialization."}
{"prompt": "Given a table [transactions(id, date, amount, status)], find the sum of successful transactions per day", "completion": "SELECT DATE(date) as transaction_date, SUM(amount) as daily_total FROM transactions WHERE status = 'success' GROUP BY DATE(date) ORDER BY transaction_date;"}
{"prompt": "Why is my variable not updating? def increment(x):\n    x = x + 1\n\nval = 5\nincrement(val)\nprint(val)", "completion": "Integers are immutable in Python. The function modifies a local copy. Fix: Return the value: def increment(x): return x + 1; val = increment(val)"}
{"prompt": "Write code to find the second largest number in a list", "completion": "def second_largest(lst):\n    if len(lst) < 2:\n        return None\n    unique = list(set(lst))\n    unique.sort(reverse=True)\n    return unique[1] if len(unique) > 1 else None"}
{"prompt": "Optimize memory usage: large_list = [process(x) for x in range(10000000)]", "completion": "Use a generator to avoid loading all items in memory: large_gen = (process(x) for x in range(10000000))\nProcess items one at a time: for item in large_gen: ..."}
{"prompt": "Debug: const arr = [1, 2, 3]; arr.map(function(x) { x * 2; });", "completion": "Missing return statement in the map callback. Fix: arr.map(function(x) { return x * 2; }) or use arrow function: arr.map(x => x * 2)"}
{"prompt": "Given tables [products(id, name, category_id), categories(id, name)], list products with their category names", "completion": "SELECT p.id, p.name as product_name, c.name as category_name FROM products p INNER JOIN categories c ON p.category_id = c.id;"}
{"prompt": "Why does this fail? try:\n    risky_operation()\nexcept:\n    pass\nprint(result)", "completion": "Silently catching all exceptions is bad practice, and 'result' may not be defined. Fix: Catch specific exceptions and ensure variables are initialized or defined in all code paths."}
{"prompt": "Write a function to remove duplicates from a list while preserving order", "completion": "def remove_duplicates(lst):\n    seen = set()\n    result = []\n    for item in lst:\n        if item not in seen:\n            seen.add(item)\n            result.append(item)\n    return result"}
{"prompt": "Debug this CSS: .container { display: flex; justify-items: center; }", "completion": "justify-items is not a valid flexbox property. Use justify-content for main axis alignment: .container { display: flex; justify-content: center; }"}
{"prompt": "Given [sales(id, product_id, quantity, date), products(id, name)], find products never sold", "completion": "SELECT p.id, p.name FROM products p LEFT JOIN sales s ON p.id = s.product_id WHERE s.id IS NULL;"}
{"prompt": "Fix race condition: counter = 0\ndef increment():\n    global counter\n    counter = counter + 1", "completion": "Use threading.Lock() to prevent race conditions:\nimport threading\ncounter = 0\nlock = threading.Lock()\n\ndef increment():\n    global counter\n    with lock:\n        counter = counter + 1"}
{"prompt": "Write code to flatten a nested list: [[1, 2], [3, [4, 5]], 6]", "completion": "def flatten(lst):\n    result = []\n    for item in lst:\n        if isinstance(item, list):\n            result.extend(flatten(item))\n        else:\n            result.append(item)\n    return result"}
{"prompt": "Debug: SELECT name, COUNT(*) FROM users GROUP BY age", "completion": "The SELECT includes 'name' which is not in GROUP BY. This causes non-deterministic results. Fix: SELECT age, COUNT(*) FROM users GROUP BY age (or add name to GROUP BY if needed)"}
{"prompt": "Why doesn't this close the file? f = open('file.txt')\ndata = f.read()\nprint(data)", "completion": "File is never closed, which can cause resource leaks. Fix: Use context manager: with open('file.txt') as f: data = f.read(); print(data)"}
{"prompt": "Write a function to check if two strings are anagrams", "completion": "def are_anagrams(s1, s2):\n    s1 = s1.lower().replace(' ', '')\n    s2 = s2.lower().replace(' ', '')\n    return sorted(s1) == sorted(s2)"}
{"prompt": "Optimize: if x == 1 or x == 2 or x == 3 or x == 4 or x == 5:", "completion": "Use membership testing: if x in [1, 2, 3, 4, 5]: or for better performance with many values: if x in {1, 2, 3, 4, 5}:"}
{"prompt": "Debug: const obj = { name: 'John' }; obj.name = 'Jane'; obj.age = 30; const obj = { city: 'NYC' };", "completion": "Cannot redeclare 'obj'. const prevents reassignment and redeclaration. Fix: Remove the second 'const' and assign to obj.city or use a different variable name."}
{"prompt": "Given [employees(id, name, manager_id, salary)], find employees earning more than their manager", "completion": "SELECT e.id, e.name, e.salary FROM employees e INNER JOIN employees m ON e.manager_id = m.id WHERE e.salary > m.salary;"}
{"prompt": "Why is my API call failing? fetch('example.com/api/data')", "completion": "Missing protocol in URL. Fix: fetch('https://example.com/api/data') - URLs must include http:// or https://"}
{"prompt": "Write code to find the longest word in a sentence", "completion": "def longest_word(sentence):\n    words = sentence.split()\n    return max(words, key=len) if words else ''"}
{"prompt": "Debug: def factorial(n):\n    if n == 0:\n        return 1\n    return n * factorial(n - 1)\n\nfactorial(-5)", "completion": "No base case for negative numbers causes infinite recursion. Fix: Add check: if n < 0: raise ValueError('n must be non-negative')"}
{"prompt": "Given tables [posts(id, user_id, title, created), users(id, name)], find users with most posts in last 30 days", "completion": "SELECT u.id, u.name, COUNT(p.id) as post_count FROM users u JOIN posts p ON u.id = p.user_id WHERE p.created >= DATE_SUB(NOW(), INTERVAL 30 DAY) GROUP BY u.id, u.name ORDER BY post_count DESC LIMIT 10;"}
{"prompt": "Optimize this: result = ''\nfor char in text:\n    result += char.upper()", "completion": "String concatenation in loops is inefficient. Fix: Use join(): result = ''.join(char.upper() for char in text) or simply: result = text.upper()"}
{"prompt": "Debug: arr = [1, 2, 3, 4, 5]\narr[2:4] = []\nprint(len(arr))", "completion": "This is actually correct - slicing assignment removes elements at indices 2-3. Result is [1, 2, 5] with length 3. No bug if this is intended behavior."}
{"prompt": "Write a function to check if a number is prime", "completion": "def is_prime(n):\n    if n < 2:\n        return False\n    for i in range(2, int(n**0.5) + 1):\n        if n % i == 0:\n            return False\n    return True"}
{"prompt": "Why doesn't this work? <button onclick=\"alert('Hello')\">Click</button> in React", "completion": "React uses camelCase for event handlers. Fix: <button onClick={() => alert('Hello')}>Click</button> (note: onClick, not onclick, and use function)"}
{"prompt": "Given [orders(id, customer_id, total, date), customers(id, name, region)], find total sales by region for Q1 2024", "completion": "SELECT c.region, SUM(o.total) as total_sales FROM orders o JOIN customers c ON o.customer_id = c.id WHERE o.date >= '2024-01-01' AND o.date < '2024-04-01' GROUP BY c.region ORDER BY total_sales DESC;"}
{"prompt": "Debug: let numbers = [1, 2, 3];\nnumbers.forEach((n) => {\n    setTimeout(() => console.log(n), 1000);\n});", "completion": "This actually works correctly - each callback captures its own 'n'. If using 'var' in a for loop, it would be a problem. With let/const in forEach, closures work as expected."}
{"prompt": "Write code to rotate an array by k positions", "completion": "def rotate_array(arr, k):\n    k = k % len(arr)  # Handle k > len(arr)\n    return arr[-k:] + arr[:-k] if k else arr"}
{"prompt": "Optimize: for i in range(len(data)):\n    for j in range(len(data)):\n        if i != j and data[i] == data[j]:\n            print('Duplicate found')", "completion": "O(nÂ²) complexity. Use a set: seen = set()\nfor item in data:\n    if item in seen:\n        print('Duplicate found')\n        break\n    seen.add(item)"}
{"prompt": "Debug: async function getData() { return fetch('/api').then(r => r.json()); }\nconst data = getData();\nconsole.log(data.items);", "completion": "getData() returns a Promise, not the data. Fix: Use await: const data = await getData(); or .then(): getData().then(data => console.log(data.items));"}
{"prompt": "Given [logs(id, user_id, action, timestamp)], find users who performed action 'login' more than 5 times today", "completion": "SELECT user_id, COUNT(*) as login_count FROM logs WHERE action = 'login' AND DATE(timestamp) = CURDATE() GROUP BY user_id HAVING COUNT(*) > 5;"}
{"prompt": "Why is state not updating? const [count, setCount] = useState(0);\nsetCount(count + 1);\nsetCount(count + 1);", "completion": "State updates are batched and asynchronous. Both calls use the same 'count' value. Fix: Use functional updates: setCount(c => c + 1); setCount(c => c + 1);"}
{"prompt": "Write a function to find intersection of two arrays", "completion": "def intersection(arr1, arr2):\n    set1 = set(arr1)\n    set2 = set(arr2)\n    return list(set1 & set2)"}
{"prompt": "Debug: def divide(a, b):\n    return a / b\n\nresult = divide(10, 0)", "completion": "Division by zero causes ZeroDivisionError. Fix:\ndef divide(a, b):\n    if b == 0:\n        raise ValueError('Cannot divide by zero')\n    return a / b"}
{"prompt": "Given tables [inventory(product_id, warehouse_id, quantity), products(id, name)], find products out of stock in all warehouses", "completion": "SELECT p.id, p.name FROM products p WHERE p.id NOT IN (SELECT product_id FROM inventory WHERE quantity > 0);"}
{"prompt": "Optimize memory: df = pd.read_csv('huge_file.csv')\nfiltered = df[df['status'] == 'active']", "completion": "Read only needed columns and use chunksize: df = pd.read_csv('huge_file.csv', usecols=['id', 'status'], chunksize=10000)\nfor chunk in df:\n    filtered = chunk[chunk['status'] == 'active']"}
{"prompt": "Debug: import numpy as np\narr = np.array([1, 2, 3])\narr[3] = 4", "completion": "Index 3 is out of bounds for array of size 3. Fix: Use append or resize: arr = np.append(arr, 4) or create with correct size initially."}
{"prompt": "Write code to calculate Fibonacci sequence up to n terms", "completion": "def fibonacci(n):\n    if n <= 0:\n        return []\n    if n == 1:\n        return [0]\n    fib = [0, 1]\n    for i in range(2, n):\n        fib.append(fib[i-1] + fib[i-2])\n    return fib"}
{"prompt": "Given [reviews(id, product_id, rating, date), products(id, name)], find products with average rating above 4.5 and at least 10 reviews", "completion": "SELECT p.id, p.name, AVG(r.rating) as avg_rating, COUNT(r.id) as review_count FROM products p JOIN reviews r ON p.id = r.product_id GROUP BY p.id, p.name HAVING AVG(r.rating) > 4.5 AND COUNT(r.id) >= 10 ORDER BY avg_rating DESC;"}
{"prompt": "Debug: list1 = [1, 2, 3]\nlist2 = list1\nlist2.append(4)\nprint(list1)", "completion": "list2 is a reference, not a copy. Modifying list2 affects list1. Fix: Use copy: list2 = list1.copy() or list2 = list1[:] or import copy; list2 = copy.deepcopy(list1)"}
{"prompt": "Write a function to validate email format", "completion": "import re\n\ndef is_valid_email(email):\n    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'\n    return bool(re.match(pattern, email))"}
{"prompt": "Optimize: data = [x for x in range(1000000) if x % 2 == 0]\nsum_data = sum(data)", "completion": "Don't materialize the entire list: sum_data = sum(x for x in range(1000000) if x % 2 == 0) - uses generator, constant memory"}
{"prompt": "Debug: class MyClass:\n    count = 0\n    def __init__(self):\n        count += 1", "completion": "Missing 'self' or class reference. Fix: self.count += 1 (for instance variable) or MyClass.count += 1 (for class variable)"}
{"prompt": "Given [sessions(id, user_id, start_time, end_time)], find average session duration by hour of day", "completion": "SELECT HOUR(start_time) as hour, AVG(TIMESTAMPDIFF(SECOND, start_time, end_time)) as avg_duration_seconds FROM sessions GROUP BY HOUR(start_time) ORDER BY hour;"}
{"prompt": "Why doesn't this work? const person = { name: 'John' }; person = { name: 'Jane' };", "completion": "const prevents reassignment of the variable. Fix: Use let: let person = { name: 'John' }; or modify properties: person.name = 'Jane';"}
{"prompt": "Write code to find missing number in array of 1 to n", "completion": "def find_missing(arr, n):\n    expected_sum = n * (n + 1) // 2\n    actual_sum = sum(arr)\n    return expected_sum - actual_sum"}
{"prompt": "Debug: app.get('/api/data', (req, res) => {\n    const data = fetchData();\n    res.json(data);\n});", "completion": "If fetchData() is async, the response may be sent before data is ready. Fix: Use async/await: app.get('/api/data', async (req, res) => { const data = await fetchData(); res.json(data); });"}
{"prompt": "Given tables [clicks(id, ad_id, user_id, timestamp), ads(id, campaign_id, cost_per_click)], calculate cost per campaign today", "completion": "SELECT a.campaign_id, SUM(a.cost_per_click) as total_cost, COUNT(c.id) as total_clicks FROM clicks c JOIN ads a ON c.ad_id = a.id WHERE DATE(c.timestamp) = CURDATE() GROUP BY a.campaign_id ORDER BY total_cost DESC;"}
{"prompt": "Optimize: if isinstance(x, int) or isinstance(x, float) or isinstance(x, complex):", "completion": "Use tuple for multiple types: if isinstance(x, (int, float, complex)):"}
{"prompt": "Debug: SELECT DISTINCT user_id, COUNT(*) FROM orders GROUP BY user_id", "completion": "DISTINCT is unnecessary and may cause confusion with GROUP BY. Remove DISTINCT: SELECT user_id, COUNT(*) FROM orders GROUP BY user_id;"}
{"prompt": "Write a function to transpose a 2D matrix", "completion": "def transpose(matrix):\n    if not matrix:\n        return []\n    return [[matrix[j][i] for j in range(len(matrix))] for i in range(len(matrix[0]))]"}
{"prompt": "Given [events(id, user_id, event_type, timestamp)], find users who completed both 'signup' and 'purchase' events", "completion": "SELECT user_id FROM events WHERE event_type IN ('signup', 'purchase') GROUP BY user_id HAVING COUNT(DISTINCT event_type) = 2;"}
{"prompt": "Debug: def process_data(data=[]): data.append('item'); return data", "completion": "Mutable default argument is shared across calls. Fix: def process_data(data=None): if data is None: data = []; data.append('item'); return data"}
{"prompt": "Why is my variable undefined? if (condition) { let x = 5; } console.log(x);", "completion": "let has block scope. 'x' only exists inside the if block. Fix: Declare outside: let x; if (condition) { x = 5; } console.log(x);"}
{"prompt": "Write code to find the mode (most frequent element) in a list", "completion": "from collections import Counter\n\ndef find_mode(lst):\n    if not lst:\n        return None\n    counts = Counter(lst)\n    max_count = max(counts.values())\n    return [k for k, v in counts.items() if v == max_count]"}
{"prompt": "Given [messages(id, sender_id, receiver_id, content, timestamp), users(id, username)], find most active message senders in last 7 days", "completion": "SELECT u.id, u.username, COUNT(m.id) as message_count FROM users u JOIN messages m ON u.id = m.sender_id WHERE m.timestamp >= DATE_SUB(NOW(), INTERVAL 7 DAY) GROUP BY u.id, u.username ORDER BY message_count DESC LIMIT 10;"}
{"prompt": "Debug: arr.sort((a, b) => a - b);\nconst sorted = arr;", "completion": "sort() modifies the array in-place. Both 'arr' and 'sorted' reference the same array. To keep original: const sorted = [...arr].sort((a, b) => a - b);"}
{"prompt": "Optimize: for item in large_list:\n    if item not in result_list:\n        result_list.append(item)", "completion": "List lookup is O(n). Use set: result_set = set()\nfor item in large_list:\n    result_set.add(item)\nresult_list = list(result_set)"}
{"prompt": "Write a function to calculate the power of a number without using **", "completion": "def power(base, exp):\n    if exp == 0:\n        return 1\n    if exp < 0:\n        return 1 / power(base, -exp)\n    result = 1\n    for _ in range(exp):\n        result *= base\n    return result"}
{"prompt": "Given [page_views(id, page_url, user_id, duration_seconds, timestamp)], find pages with highest average engagement time", "completion": "SELECT page_url, AVG(duration_seconds) as avg_duration, COUNT(*) as view_count FROM page_views GROUP BY page_url HAVING COUNT(*) >= 100 ORDER BY avg_duration DESC LIMIT 20;"}
{"prompt": "Debug: const promise = new Promise((resolve, reject) => { setTimeout(resolve('Done'), 1000); });", "completion": "setTimeout doesn't return a value. Fix: setTimeout(() => resolve('Done'), 1000); - pass a function that calls resolve"}
{"prompt": "Why doesn't this update? const arr = [1, 2, 3]; arr.map(x => x * 2); console.log(arr);", "completion": "map() returns a new array, doesn't modify original. Fix: const newArr = arr.map(x => x * 2); console.log(newArr);"}
{"prompt": "Write code to implement binary search", "completion": "def binary_search(arr, target):\n    left, right = 0, len(arr) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if arr[mid] == target:\n            return mid\n        elif arr[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1"}
{"prompt": "Given [bookings(id, room_id, start_date, end_date, guest_name), rooms(id, room_number, capacity)], find rooms available on a specific date", "completion": "SELECT r.id, r.room_number FROM rooms r WHERE r.id NOT IN (SELECT room_id FROM bookings WHERE '2024-03-15' BETWEEN start_date AND end_date);"}
{"prompt": "Debug: import pandas as pd\ndf['new_col'] = df['col1'] + df['col2']\ndf.loc[df['col1'] > 10, 'new_col'] = 0", "completion": "This may trigger SettingWithCopyWarning if df is a slice. Safer: df = df.copy() first, or use .loc throughout, or suppress warning if intentional."}
{"prompt": "Optimize: result = []\nfor i in range(1000):\n    if complex_condition(i):\n        result.append(transform(i))", "completion": "If complex_condition is expensive, use filter and map: result = list(map(transform, filter(complex_condition, range(1000)))) or: result = [transform(i) for i in range(1000) if complex_condition(i)]"}
{"prompt": "Write a function to reverse words in a sentence", "completion": "def reverse_words(sentence):\n    words = sentence.split()\n    return ' '.join(reversed(words))"}
{"prompt": "Given [tasks(id, project_id, assignee_id, status, created_date), users(id, name)], find users with most completed tasks this month", "completion": "SELECT u.id, u.name, COUNT(t.id) as completed_tasks FROM users u JOIN tasks t ON u.id = t.assignee_id WHERE t.status = 'completed' AND YEAR(t.created_date) = YEAR(CURDATE()) AND MONTH(t.created_date) = MONTH(CURDATE()) GROUP BY u.id, u.name ORDER BY completed_tasks DESC LIMIT 10;"}
{"prompt": "Debug: class Animal:\n    def __init__(self, name):\n        self.name = name\n\nclass Dog(Animal):\n    def __init__(self, name, breed):\n        self.breed = breed", "completion": "Parent __init__ not called, so self.name is not set. Fix: Add super().__init__(name) in Dog.__init__ before self.breed = breed"}
{"prompt": "Why doesn't this work? fetch('/api/data').then(res => res.json()).then(data => console.log(data)).catch(err => console.error(err));", "completion": "This actually works correctly. If there's an issue, check: 1) Network connectivity, 2) API endpoint exists, 3) CORS settings, 4) Response is valid JSON"}
{"prompt": "Write code to find all permutations of a string", "completion": "from itertools import permutations\n\ndef get_permutations(s):\n    return [''.join(p) for p in permutations(s)]"}
{"prompt": "Given [products(id, name, price, category_id), sales(product_id, quantity, date)], find products that sold most units last month", "completion": "SELECT p.id, p.name, SUM(s.quantity) as total_sold FROM products p JOIN sales s ON p.id = s.product_id WHERE s.date >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH) GROUP BY p.id, p.name ORDER BY total_sold DESC LIMIT 10;"}
{"prompt": "Debug: document.getElementById('myButton').addEventListener('click', handleClick());", "completion": "handleClick() is called immediately, not on click. Remove parentheses: addEventListener('click', handleClick) or use arrow function: addEventListener('click', () => handleClick())"}
{"prompt": "Optimize: texts = ['hello', 'world', 'python']\nfor text in texts:\n    print(text.upper())", "completion": "If processing many items, use map: print('\\n'.join(map(str.upper, texts))) - more efficient for large datasets"}
{"prompt": "Write a function to check if brackets are balanced", "completion": "def is_balanced(s):\n    stack = []\n    pairs = {'(': ')', '[': ']', '{': '}'}\n    for char in s:\n        if char in pairs:\n            stack.append(char)\n        elif char in pairs.values():\n            if not stack or pairs[stack.pop()] != char:\n                return False\n    return len(stack) == 0"}
{"prompt": "Given [employees(id, name, department_id, hire_date, salary), departments(id, name)], find departments with highest average salary", "completion": "SELECT d.id, d.name, AVG(e.salary) as avg_salary FROM departments d JOIN employees e ON d.id = e.department_id GROUP BY d.id, d.name ORDER BY avg_salary DESC LIMIT 5;"}
{"prompt": "Debug: useEffect(() => { fetchData(); }, []);  // fetchData uses props.userId", "completion": "Missing dependency. ESLint warning: add props.userId to dependency array: useEffect(() => { fetchData(); }, [props.userId]); or use exhaustive-deps rule"}
{"prompt": "Why is my CSS animation not working? .box { animation: slide 2s; }", "completion": "Missing @keyframes definition. Add: @keyframes slide { from { transform: translateX(0); } to { transform: translateX(100px); } }"}
{"prompt": "Write code to find common elements in three arrays", "completion": "def common_elements(arr1, arr2, arr3):\n    set1 = set(arr1)\n    set2 = set(arr2)\n    set3 = set(arr3)\n    return list(set1 & set2 & set3)"}
{"prompt": "Given [visits(id, user_id, page_id, timestamp), pages(id, url, category)], find most visited pages per category today", "completion": "WITH ranked AS (SELECT p.category, p.url, COUNT(v.id) as visit_count, ROW_NUMBER() OVER (PARTITION BY p.category ORDER BY COUNT(v.id) DESC) as rank FROM pages p JOIN visits v ON p.id = v.page_id WHERE DATE(v.timestamp) = CURDATE() GROUP BY p.category, p.url) SELECT category, url, visit_count FROM ranked WHERE rank = 1;"}
{"prompt": "Debug: x = 5\ndef my_func():\n    x += 1\n    return x", "completion": "UnboundLocalError: x is local due to assignment. Fix: Add 'global x' before x += 1, or pass as parameter"}
{"prompt": "Optimize: result = {}\nfor key in data.keys():\n    result[key] = process(data[key])", "completion": "Use dict comprehension: result = {key: process(value) for key, value in data.items()} - cleaner and potentially faster"}
{"prompt": "Write a function to calculate GCD of two numbers", "completion": "def gcd(a, b):\n    while b:\n        a, b = b, a % b\n    return abs(a)"}
{"prompt": "Given [subscriptions(id, user_id, plan_id, start_date, end_date, status), plans(id, name, price)], calculate MRR by plan", "completion": "SELECT p.name, SUM(p.price) as monthly_recurring_revenue, COUNT(s.id) as active_subscriptions FROM subscriptions s JOIN plans p ON s.plan_id = p.id WHERE s.status = 'active' AND s.end_date > CURDATE() GROUP BY p.name ORDER BY monthly_recurring_revenue DESC;"}
{"prompt": "Debug: int('123.45')", "completion": "int() cannot parse floats directly from strings. Fix: int(float('123.45')) or use: int('123') for integer strings only"}
{"prompt": "Why doesn't this work in SQL? SELECT * FROM users WHERE name = 'O'Brien'", "completion": "Unescaped single quote breaks the string. Fix: Use doubled quotes: WHERE name = 'O''Brien' or use parameterized queries"}
{"prompt": "Write code to find kth largest element in array", "completion": "import heapq\n\ndef kth_largest(arr, k):\n    return heapq.nlargest(k, arr)[-1] if k <= len(arr) else None"}
{"prompt": "Given [tickets(id, customer_id, priority, status, created, resolved), customers(id, name, tier)], find average resolution time by priority", "completion": "SELECT priority, AVG(TIMESTAMPDIFF(HOUR, created, resolved)) as avg_hours FROM tickets WHERE status = 'resolved' AND resolved IS NOT NULL GROUP BY priority ORDER BY priority;"}
{"prompt": "Debug: mongoose.model('User', userSchema);\nconst User = mongoose.model('User');", "completion": "This works, but define once: const User = mongoose.model('User', userSchema); Calling model() twice with same name may cause issues. Better to export from model definition."}
{"prompt": "Optimize: data.sort(key=lambda x: expensive_function(x))", "completion": "expensive_function is called multiple times per element. Fix: Precompute: data.sort(key=lambda x: precomputed_dict[x]) or use sorted with memoization"}
{"prompt": "Write a function to convert Roman numerals to integers", "completion": "def roman_to_int(s):\n    values = {'I': 1, 'V': 5, 'X': 10, 'L': 50, 'C': 100, 'D': 500, 'M': 1000}\n    total = 0\n    prev = 0\n    for char in reversed(s):\n        val = values[char]\n        if val < prev:\n            total -= val\n        else:\n            total += val\n        prev = val\n    return total"}
{"prompt": "Given [orders(id, customer_id, total, created), returns(id, order_id, amount, reason)], find customers with highest return rate", "completion": "SELECT o.customer_id, COUNT(DISTINCT o.id) as total_orders, COUNT(DISTINCT r.id) as total_returns, COUNT(DISTINCT r.id) * 100.0 / COUNT(DISTINCT o.id) as return_rate FROM orders o LEFT JOIN returns r ON o.id = r.order_id GROUP BY o.customer_id HAVING COUNT(DISTINCT o.id) >= 5 ORDER BY return_rate DESC LIMIT 10;"}
{"prompt": "Debug: arr = [3, 1, 4, 1, 5]\narr.remove(1)\nprint(arr)", "completion": "remove() only removes first occurrence. Result: [3, 4, 1, 5]. To remove all: arr = [x for x in arr if x != 1]"}
