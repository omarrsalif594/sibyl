[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Enable async test support
asyncio_mode = auto

markers =
    core: Core framework tests (domain-neutral)
    examples: Example application tests (domain-specific allowed)
    examples_e2e: End-to-end tests for example companies
    integration: Integration tests
    unit: Unit tests
    retailflow: RetailFlow example tests
    riverbank: RiverBank Finance example tests
    requires_mcp: Tests requiring MCP servers to be running
    mcp_ast_server: Tests requiring AST Server MCP
    mcp_graphiti: Tests requiring Graphiti MCP
    mcp_chronulus: Tests requiring Chronulus MCP (time series forecasting)
    slow: Slow-running tests
    asyncio: Asyncio-based tests
    techniques_template: Technique template structure and conformance tests
    plugins: Plugin system tests
    guardrail: Fast deterministic tests that must always pass

# Ignore archived tests and non-source dirs
norecursedirs = archive platform src resources .git __pycache__ *.egg-info

# Stricter warnings for core tests
filterwarnings =
    error::DeprecationWarning
